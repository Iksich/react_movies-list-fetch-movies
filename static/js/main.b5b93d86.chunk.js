(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},22:function(e,t,i){},23:function(e,t,i){"use strict";i.r(t);var r=i(9),c=i.n(r),a=(i(16),i(11)),n=i(6),s=i(2),o=(i(17),i(18),i(19),{title:"",description:"",imgUrl:"",imdbUrl:"",imdbId:""}),l=i(0),d=function(e){var t=e.movie,i=void 0===t?o:t,r=i.title,c=i.description,a=i.imgUrl,n=i.imdbUrl;return Object(l.jsxs)("div",{className:"card","data-cy":"movieCard",children:[Object(l.jsx)("div",{className:"card-image",children:Object(l.jsx)("figure",{className:"image is-4by3",children:a&&Object(l.jsx)("img",{"data-cy":"moviePoster",src:a,alt:"Film logo"})})}),Object(l.jsxs)("div",{className:"card-content",children:[Object(l.jsxs)("div",{className:"media",children:[Object(l.jsx)("div",{className:"media-left",children:Object(l.jsx)("figure",{className:"image is-48x48",children:Object(l.jsx)("img",{src:"images/imdb-logo.jpeg",alt:"imdb"})})}),Object(l.jsx)("div",{className:"media-content",children:r&&Object(l.jsx)("p",{className:"title is-8","data-cy":"movieTitle",children:r})})]}),Object(l.jsxs)("div",{className:"content","data-cy":"movieDescription",children:[c,Object(l.jsx)("br",{}),n&&Object(l.jsx)("a",{href:n,"data-cy":"movieURL",children:"IMDB"})]})]})]})};d.defaultProps={movie:o};var m=function(e){var t=e.movies;return Object(l.jsx)("div",{className:"movies",children:t.map((function(e){return Object(l.jsx)(d,{movie:e},e.imdbId)}))})},j=i(10),u=i(1),b=i(8),v=i.n(b),h=i(5),O=i.n(h);i(22);var p=function(e){var t=e.Title,i=e.Plot,r=e.Poster,c=e.imdbID;return{title:t,description:i,imgUrl:"N/A"===r?"https://via.placeholder.com/360x270.png?text=no%20preview":r,imdbUrl:"https://www.imdb.com/title/".concat(c),imdbId:c}},f={placeholder:"",className:"",error:!1,errorMessage:""},x=function(e){var t=e.label,i=e.id,r=e.value,c=e.placeholder,a=void 0===c?f.placeholder:c,n=e.className,s=void 0===n?f.className:n,o=e.error,d=void 0===o?f.error:o,m=e.errorMessage,j=void 0===m?f.errorMessage:m,u=e.onChange;return Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)("label",{className:"label",htmlFor:i,children:t}),Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("input",{"data-cy":"titleField",type:"text",value:r,id:i,placeholder:a,className:O()("input",s,{"is-danger":d}),onChange:u})}),d&&Object(l.jsx)("p",{className:"help is-danger","data-cy":"errorMessage",children:j})]})};x.defaultProps=f;var g=function(e){var t=e.onAdd,i=Object(s.useState)({query:"",movie:null,error:!1,isLoading:!1}),r=Object(n.a)(i,2),c=r[0],a=r[1],o=function(){var e=Object(j.a)(v.a.mark((function e(t){var i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.prev=2,e.next=5,n=c.query,fetch("".concat("https://www.omdbapi.com/?apikey=7f86bf65","&t=").concat(n)).then((function(e){return e.json()})).catch((function(){return{Response:"False",Error:"unexpected error"}}));case 5:"Error"in(i=e.sent)?a((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:!0})})):(r=p(i),a((function(e){return Object(u.a)(Object(u.a)({},e),{},{movie:r})})));case 7:return e.prev=7,a((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1})})),e.finish(7);case 10:case"end":return e.stop()}var n}),e,null,[[2,,7,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{className:"find-movie",onSubmit:o,children:[Object(l.jsx)(x,{"data-cy":"titleField",label:"Movie title",id:"movie-title",value:c.query,placeholder:"Enter a movie title",onChange:function(e){var t=e.target.value;a((function(e){return Object(u.a)(Object(u.a)({},e),{},{query:t,error:!1})}))},error:c.error,errorMessage:"Could not find a movie with that title"}),Object(l.jsxs)("div",{className:"field is-grouped",children:[Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{"data-cy":"searchButton",type:"submit",className:O()("button is-light",{"is-loading":c.isLoading}),disabled:!c.query.trim(),children:"Search"})}),c.movie&&Object(l.jsx)("div",{className:"control",children:Object(l.jsx)("button",{"data-cy":"addButton",type:"button",className:"button is-primary",onClick:function(){c.movie&&(t(c.movie),a({query:"",movie:null,error:!1,isLoading:!1}))},children:"Add"})})]})]}),c.movie&&Object(l.jsxs)("div",{className:"container","data-cy":"previewContainer",children:[Object(l.jsx)("h2",{className:"title",children:"Preview"}),Object(l.jsx)(d,{movie:c.movie})]})]})},N=function(){var e=Object(s.useState)([]),t=Object(n.a)(e,2),i=t[0],r=t[1],c=Object(s.useCallback)((function(e){i.some((function(t){return t.imdbId===e.imdbId}))||r((function(t){return[].concat(Object(a.a)(t),[e])}))}),[i]);return Object(l.jsxs)("div",{className:"page",children:[Object(l.jsx)("div",{className:"page-content",children:Object(l.jsx)(m,{movies:i})}),Object(l.jsx)("div",{className:"sidebar",children:Object(l.jsx)(g,{onAdd:c})})]})};c.a.render(Object(l.jsx)(N,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b5b93d86.chunk.js.map